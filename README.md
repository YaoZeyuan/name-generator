# 诗云-起个好名字

> 在线预览: https://www.yaozeyuan.online/name-generator/

给孩子起名一直是件很费心的事, 一个恰当得体的名字就像一首好诗一样难写. 我在为孩子准备名字时也碰到了这个问题, 然后就想到了刘慈欣的一篇科幻小说:<诗云>. 在小说中, 超等文明的成员"李白"想超越真实的李白写出最好的绝句, 但他发现自己能力有限, 写的绝句和李白的原作相比总是差那么一些. 为解决这个问, 他决定使用科技----已知汉语只有 3500 个常用汉字, 七言绝句一共 28 个字, 那只要排列组合生成`3500^28`首诗歌, 覆盖所有可能性, 显然就可以保证自己一定`写`出了最美的诗篇.

# 思路一: 诗云

起名也是这个道理.

对于三字名而言, 名只会由两个中文字符组成, 如果候选字库是 3500 常用字的话最多只有`3500 * 3500 = 12250000`种可能性. 而如果只考虑发音的话, 中文所有字符连上音调一共只有`970`种发音, 合并音调后只有`374`种可能. 也就是说, 不考虑音调, 所有三字名的可能组合最多只有`374 * 374 = 139876`种情况----在这个数量级下, 筛选就是可能的了.

诗云的思路是: 指定姓氏后, 生成所有可能的三字名发音(或汉字)组合. 通过程序自动排除所有不符合规则的组合, 可选的姓名必然在剩下的列表中. 而诗云中支持的过滤规则如下

## 音韵学规则

- 禁止与指定汉字同音
  - 避免与长辈/亲属同名
- 禁止叠双声声
  - 连续两字声母所属分类相同, 例如`d/t/n/l` 同属舌尖中音, 一次性念出`电梯内到他那里动态能力的童年`会非常困难
- 禁止叠韵
  - 连续两字韵母所属分类相同, 例如`喇嘛拿喇叭拉哑巴换挞嘛`---- 该规则一般用于编写绕口令
- 音调平仄
  - 三字名的音调平仄一共有 64 种不同情况, 从音韵美感评级上可分为 1~5 分, 诗云中仅提供评分为 3 分以上的组合
  - 支持按男宝女宝选名
    - 男宝结尾名一般选二声(阳平)或四声(去声), 比较响亮, 干脆利落
    - 女宝结尾名一般选一声(阴平), 比较温和
    - 三声(上声)结尾, 男宝女宝均可用
- 避免多音字
  - 姓名中需要绕开多音字, 以避免被喊错名字
  - 诗云中对 100 万+姓名进行解析, 除了姓名中明确作为单音字使用的"多音字"外(如`华/中/大/正/和`), 其他多音字均已从候选字库排除. 具体规则见[多音字取音标准](./doc/多音字取音标准.md)
  - 若姓氏本身是多音字(如任), 需要指定发音后方可继续使用

## 候选字规则

汉字中并不是所有字都可以用于起名. 事实上, 对 16 万现代人名的统计分析显示, 这 16 万人中使用次数大于 3 次的字只有 1922 个. 因此, 诗云基于以下原则生成候选字库

- 标准字库: 由[@wensonsmith](https://www.v2ex.com/t/641804)从新华字典中手工挑选而成, 共 820 个字(排除多音字后剩余 787 个)
- 人名字库: 由 16 万现代人名, 以及 21w 私募基金名 + 2w 维护该私募基金的公司名中的用字而成. 按照出现频率分为`1/5/10/50/100次`五种类别, 出现频率越高, 证明得到的认可越多
- 指定用字: 诗云支持指定姓名中必须出现的汉字, 并且支持指定汉字要出现的位置(适用于有辈分的情况). 需要特殊说明的是, 如果要求汉字必须出现在第二位, 那么诗云会跳过对三字名中前两个字的发音检查(因为已经进行了指定, 检查没有意义), 需要用户自行把控效果

生成的候选方案会很多, 因此诗云支持将候选列表下载到电脑上进行排查

# 思路二: 根据已有姓名方案进行生成 => 登科录/古人云/五道口/他山石/财富论/
